<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Map</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <header id="main-header" class="d-flex justify-content-between p-3 bg-dark">
      <h1 class="text-white">Weather <span class="text-warning">App</span></h1>
    </header>

    <div id="container" class="d-flex flex-row m-2"></div>

    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script src="js/keys.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
      (function () {
        $(document).ready(function () {
          console.log("Looking good in the jQuery DOM!");

          //   weather content
          function weatherInformation(weather) {
            var weatherContent = "";
            var weatherCity = "";

            //city
            weatherCity +=
              '<h2 class="text-white">' +
              "<span class='text-warning'>Current City</span>: " +
              weather.city.name +
              "</h2>";

            // 5day forecast
            for (var i = 0; i < 40; i++) {
              if (i % 8 === 0) {
                weatherContent +=
                  '<div id="card" class="card d-flex flex-row m-2" style="width: 20rem;">';
                weatherContent += '<div class="card-body d-flex flex-column justify-content-around">';
                weatherContent +=
                  '<h5 class="card-title">' + weather.list[i].dt_txt + "</h5>";
                weatherContent +=
                  '<p class="card-text">' +
                  '<span class="font-weight-bold">High</span>: ' +
                  weather.list[i].main.temp_max +
                  " / " +
                  "<span class='font-weight-bold'>Low:</span> " +
                  weather.list[0].main.temp_min +
                  "</p>";
                weatherContent +=
                  '<p class="card-text text-capitalize">' +
                  weather.list[i].weather[0].description +
                  "</p>";
                weatherContent +=
                  "<p class='card-text'>" +
                  "Wind Speed: " +
                  weather.list[i].wind.speed +
                  "</p>";
                weatherContent += "</div>";
                weatherContent += "</div>";
              }
            }
            $("#main-header").append(weatherCity);
            $("#container").append(weatherContent);
          }

          // ajax
          $.get("http://api.openweathermap.org/data/2.5/forecast?", {
            APPID: OWM_KEY,
            q: "Oklahoma city, US",
            units: "imperial",
          })
            .done(function (data, status) {
              console.log(data);
              console.log(status);
              weatherInformation(data);
            })
            .error(function (error) {
              console.log("Error:");
              console.log(error);
            });
        });
      })();
    </script>
  </body>
</html>
